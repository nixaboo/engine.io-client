!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.eio=t():e.eio=t()}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:Function("return this")(),(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=27)}([function(e,t,r){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:function(){}}},function(e,t,r){var n=r(34),o=r(35),i=r(37);t.protocol=4;var s=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},a=Object.keys(s),c={type:"error",data:"parser error"},u=Buffer.concat([]);function f(e,r,n){return r?n(e.data):t.encodeBase64Packet(e,n)}function l(e,t,r){for(var n=new Array(e.length),o=i(e.length,r),s=function(r){t(e[r],(function(e,t){n[r]=t,o(e,n)}))},a=0;a<e.length;a++)s(a)}function p(e){for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return t}function h(e){for(var t=Buffer.allocUnsafe(e.length),r=0,n=e.length;r<n;r++)t.writeUInt8(e.charCodeAt(r),r);return t}function d(e){var t=e.byteLength||e.length,r=e.byteOffset||0;return Buffer.from(e.buffer||e,r,t)}function y(e,r){t.encodePacket(e,!0,!0,(function(e){var t,n=""+e.length;if("string"==typeof e){(t=Buffer.allocUnsafe(n.length+2))[0]=0;for(var o=0;o<n.length;o++)t[o+1]=parseInt(n[o],10);return t[t.length-1]=255,r(null,Buffer.concat([t,h(e)]))}(t=Buffer.allocUnsafe(n.length+2))[0]=1;for(var i=0;i<n.length;i++)t[i+1]=parseInt(n[i],10);t[t.length-1]=255,r(null,Buffer.concat([t,e]))}))}t.encodePacket=function(e,t,r,o){if("function"==typeof t&&(o=t,t=null),"function"==typeof r&&(o=r,r=null),Buffer.isBuffer(e.data))return f(e,t,o);if(e.data&&(e.data.buffer||e.data)instanceof ArrayBuffer)return f({type:e.type,data:d(e.data)},t,o);var i=s[e.type];return void 0!==e.data&&(i+=r?n.encode(String(e.data),{strict:!1}):String(e.data)),o(""+i)},t.encodeBase64Packet=function(e,t){var r=Buffer.isBuffer(e.data)?e.data:d(e.data),n="b"+s[e.type];return t(n+=r.toString("base64"))},t.decodePacket=function(e,r,o){return void 0===e?c:"string"==typeof e?"b"===(i=e.charAt(0))?t.decodeBase64Packet(e.substr(1),r):o&&!1===(e=function(e){try{e=n.decode(e,{strict:!1})}catch(e){return!1}return e}(e))?c:Number(i)==i&&a[i]?e.length>1?{type:a[i],data:e.substring(1)}:{type:a[i]}:c:"arraybuffer"===r?{type:"message",data:new Uint8Array(e).buffer}:(e instanceof ArrayBuffer&&(e=d(e)),{type:"message",data:e});var i},t.decodeBase64Packet=function(e,t){var r=a[e.charAt(0)],n=Buffer.from(e.substr(1),"base64");if("arraybuffer"===t){for(var o=new Uint8Array(n.length),i=0;i<o.length;i++)o[i]=n[i];n=o.buffer}return{type:r,data:n}},t.encodePayload=function(e,r,n){if("function"==typeof r&&(n=r,r=null),r&&o(e))return t.encodePayloadAsBinary(e,n);if(!e.length)return n("0:");l(e,(function(e,n){t.encodePacket(e,r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);if("function"==typeof r&&(n=r,r=null),""===e)return n(c,0,1);for(var o,i,s,a="",u=0,f=e.length;u<f;u++){var l=e.charAt(u);if(":"===l){if(""===a||a!=(o=Number(a)))return n(c,0,1);if(a!=(i=e.substr(u+1,o)).length)return n(c,0,1);if(i.length){if(s=t.decodePacket(i,r,!1),c.type===s.type&&c.data===s.data)return n(c,0,1);if(!1===n(s,u+o,f))return}u+=o,a=""}else a+=l}return""!==a?n(c,0,1):void 0},t.encodePayloadAsBinary=function(e,t){if(!e.length)return t(u);l(e,y,(function(e,r){return t(Buffer.concat(r))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o,i=e,s=[];i.length>0;){var a="",u=0===i[0];for(o=1;255!==i[o];o++){if(a.length>310)return n(c,0,1);a+=""+i[o]}i=i.slice(a.length+1);var f=parseInt(a,10),l=i.slice(1,f+1);u&&(l=p(l)),s.push(l),i=i.slice(f+1)}var h=s.length;for(o=0;o<h;o++){var d=s[o];n(t.decodePacket(d,r,!0),o,h)}}},function(e,t){e.exports=require("url")},function(e,t,r){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(38):e.exports=r(40)},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=r(51),u=r(5),f=r(52),l=r(0),p=l.kStatusCode,h=l.NOOP,d=Buffer.from([0,0,255,255]),y=Symbol("permessage-deflate"),v=Symbol("total-length"),m=Symbol("callback"),b=Symbol("buffers"),g=Symbol("error"),_=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._maxPayload=0|n,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!a){var o=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;a=new f(o)}}var t,r,n;return t=e,n=[{key:"extensionName",get:function(){return"permessage-deflate"}}],(r=[{key:"offer",value:function(){var e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}},{key:"accept",value:function(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}},{key:"cleanup",value:function(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){var e=this._deflate[m];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}},{key:"acceptAsServer",value:function(e){var t=this._options,r=e.find((function(e){return!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)}));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}},{key:"acceptAsClient",value:function(e){var t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}},{key:"normalizeParams",value:function(e){var t=this;return e.forEach((function(e){Object.keys(e).forEach((function(r){var n=e[r];if(n.length>1)throw new Error('Parameter "'.concat(r,'" must have only a single value'));if(n=n[0],"client_max_window_bits"===r){if(!0!==n){var o=+n;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError('Invalid value for parameter "'.concat(r,'": ').concat(n));n=o}else if(!t._isServer)throw new TypeError('Invalid value for parameter "'.concat(r,'": ').concat(n))}else if("server_max_window_bits"===r){var i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError('Invalid value for parameter "'.concat(r,'": ').concat(n));n=i}else{if("client_no_context_takeover"!==r&&"server_no_context_takeover"!==r)throw new Error('Unknown parameter "'.concat(r,'"'));if(!0!==n)throw new TypeError('Invalid value for parameter "'.concat(r,'": ').concat(n))}e[r]=n}))})),e}},{key:"decompress",value:function(e,t,r){var n=this;a.add((function(o){n._decompress(e,t,(function(e,t){o(),r(e,t)}))}))}},{key:"compress",value:function(e,t,r){var n=this;a.add((function(o){n._compress(e,t,(function(e,t){o(),r(e,t)}))}))}},{key:"_decompress",value:function(e,t,r){var n=this,i=this._isServer?"client":"server";if(!this._inflate){var s="".concat(i,"_max_window_bits"),a="number"!=typeof this.params[s]?c.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=c.createInflateRaw(o(o({},this._options.zlibInflateOptions),{},{windowBits:a})),this._inflate[y]=this,this._inflate[v]=0,this._inflate[b]=[],this._inflate.on("error",S),this._inflate.on("data",k)}this._inflate[m]=r,this._inflate.write(e),t&&this._inflate.write(d),this._inflate.flush((function(){var e=n._inflate[g];if(e)return n._inflate.close(),n._inflate=null,void r(e);var o=u.concat(n._inflate[b],n._inflate[v]);t&&n.params["".concat(i,"_no_context_takeover")]?(n._inflate.close(),n._inflate=null):(n._inflate[v]=0,n._inflate[b]=[]),r(null,o)}))}},{key:"_compress",value:function(e,t,r){var n=this,i=this._isServer?"server":"client";if(!this._deflate){var s="".concat(i,"_max_window_bits"),a="number"!=typeof this.params[s]?c.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=c.createDeflateRaw(o(o({},this._options.zlibDeflateOptions),{},{windowBits:a})),this._deflate[v]=0,this._deflate[b]=[],this._deflate.on("error",h),this._deflate.on("data",w)}this._deflate[m]=r,this._deflate.write(e),this._deflate.flush(c.Z_SYNC_FLUSH,(function(){if(n._deflate){var e=u.concat(n._deflate[b],n._deflate[v]);t&&(e=e.slice(0,e.length-4)),n._deflate[m]=null,t&&n.params["".concat(i,"_no_context_takeover")]?(n._deflate.close(),n._deflate=null):(n._deflate[v]=0,n._deflate[b]=[]),r(null,e)}}))}}])&&s(t.prototype,r),n&&s(t,n),e}();function w(e){this[b].push(e),this[v]+=e.length}function k(e){this[v]+=e.length,this[y]._maxPayload<1||this[v]<=this[y]._maxPayload?this[b].push(e):(this[g]=new RangeError("Max payload size exceeded"),this[g][p]=1009,this.removeListener("data",k),this.reset())}function S(e){this[y]._inflate=null,e[p]=1007,this[m](e)}e.exports=_},function(e,t,r){"use strict";var n=r(0).EMPTY_BUFFER;function o(e,t){if(0===e.length)return n;if(1===e.length)return e[0];for(var r=Buffer.allocUnsafe(t),o=0,i=0;i<e.length;i++){var s=e[i];r.set(s,o),o+=s.length}return o<t?r.slice(0,o):r}function i(e,t,r,n,o){for(var i=0;i<o;i++)r[n+i]=e[i]^t[3&i]}function s(e,t){for(var r=e.length,n=0;n<r;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){return c.readOnly=!0,Buffer.isBuffer(e)?e:(e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t);var t}try{var u=r(!function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()),f=u.BufferUtil||u;e.exports={concat:o,mask:function(e,t,r,n,o){o<48?i(e,t,r,n,o):f.mask(e,t,r,n,o)},toArrayBuffer:a,toBuffer:c,unmask:function(e,t){e.length<32?s(e,t):f.unmask(e,t)}}}catch(t){e.exports={concat:o,mask:i,toArrayBuffer:a,toBuffer:c,unmask:s}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(2),i=r(29).XMLHttpRequest,s=r(14),a=new(r(32));e.exports={XMLHttpRequest:function(){var e=new i,t=null,r=e.open;e.open=function(){return t=o.parse(arguments[1]),r.apply(e,arguments)};var c=!1;return e.addEventListener("readystatechange",(function(){switch(e.readyState){case this.OPENED:c||(!function(e,t){t.setDisableHeaderCheck(!0);for(var r=t.getRequestHeader("Cookie")||"",n=a.findFuzzy(e.hostname,e.pathname),o=0;o<n.length;o++)n[o].secure&&"https:"!==e.protocol||n[o].httponly&&null===e.protocol.match(/^https?:$/i)||(""!==r&&(r+="; "),r+=n[o].name+"="+n[o].value);""!==r&&(t.debug&&console.log("XMLHttpRequest-Cookie: send cookie(s): ",r),t.setRequestHeader("Cookie",r)),t.setDisableHeaderCheck(!1)}(t,e),c=!0);break;case this.HEADERS_RECEIVED:!function(e,t){t.setDisableHeaderCheck(!0);var r=t.getResponseHeader("Set-Cookie");if("object"===n(r)&&null!==r&&r.length>0)for(var o=0;o<r.length;o++){var i=s.build(r[o],e);a.insert(i),t.debug&&console.log("XMLHttpRequest-Cookie: received cookie: ",i)}t.setDisableHeaderCheck(!1)}(t,e)}})),e.debug=!1,e},CookieJar:a}},function(e,t){e.exports=require("http")},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(1),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).opts=e,t.query=e.query,t.readyState="",t.socket=e.socket,t}return t=c,(r=[{key:"onError",value:function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=u.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}])&&o(t.prototype,r),n&&o(t,n),c}(r(9));e.exports=f},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=require("crypto")},function(e,t,r){var n=r(6),o=r(33),i=r(45),s=r(46);t.polling=function(e){var t=!1,r=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==a}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},function(e,t){e.exports=require("https")},function(e,t,r){var n=r(2),o=function(e,t,r,n,o,i,s){this.name=e||"",this.value=t||"",this.domain=r||"",this.path=n||"/",this.expires=o||new Date(Date.now()+31536e6),this.secure=i||!1,this.httponly=s||!1};o.prototype.expired=function(){return+this.expires<Date.now()},o.prototype.toKey=function(){return this.name+":"+this.domain+":"+this.path},o.prototype.toString=function(){var e=this.name+"="+this.value;return e+="; Domain="+this.domain,e+="; Path="+this.path,e+="; Expires="+this.expires,this.secure&&(e+="; Secure"),this.httponly&&(e+="; HttpOnly"),e},o.build=function(e,t){var r=new o;void 0!==t&&("string"==typeof t&&(t=n.parse(t,!0,!0)),r.domain=t.hostname,r.path=t.pathname);var i,s=/([^=]+)(?:=(.*))?/,a=(""+e).split("; ");if(null===(i=a.shift().match(s)))throw new Error("failed to parse cookie string");r.name=i[1],r.value=i[2];for(var c=0,u=a.length;c<u;c++)if(null!==(i=a[c].match(s))&&i.length){var f=i[1].toLowerCase();void 0!==r[f]&&(r[f]="string"!=typeof i[2]||i[2])}return"string"==typeof r.expires&&(r.expires=new Date(r.expires)),r},e.exports=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r(8),l=r(10),p=r(1),h=r(16),d=r(3)("engine.io-client:polling"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,r,n,c=a(u);function u(){return o(this,u),c.apply(this,arguments)}return t=u,(r=[{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;function r(){d("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(d("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){d("pre-pause polling complete"),--n||r()}))),this.writable||(d("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){d("pre-pause writing complete"),--n||r()})))}else r()}},{key:"poll",value:function(){d("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;d("polling got data %s",e),p.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():d('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var e=this;function t(){d("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(d("transport open - closing"),t()):(d("transport not open - deferring close"),this.once("open",t))}},{key:"write",value:function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};p.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",r="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=h()),this.supportsBinary||e.sid||(e.b64=1),e=l.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+e}},{key:"name",get:function(){return"polling"}}])&&i(t.prototype,r),n&&i(t,n),u}(f);e.exports=y},function(e,t,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,a=0;function c(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==n?(s=0,n=e):e+"."+c(s++)}for(;a<64;a++)i[o[a]]=a;u.encode=c,u.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+i[e.charAt(a)];return t},e.exports=u},function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return o.colors[Math.abs(t)%o.colors.length]}function o(e){var r;function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(n.enabled){var s=n,a=Number(new Date),c=a-(r||a);s.diff=c,s.prev=r,s.curr=a,r=a,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var n=o.formatters[r];if("function"==typeof n){var i=t[u];e=n.call(s,i),t.splice(u,1),u--}return e})),o.formatArgs.call(s,t);var f=s.log||o.log;f.apply(s,t)}}return n.namespace=e,n.enabled=o.enabled(e),n.useColors=o.useColors(),n.color=t(e),n.destroy=i,n.extend=s,"function"==typeof o.init&&o.init(n),o.instances.push(n),n}function i(){var e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function s(e,t){var r=o(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},o.disable=function(){var e=[].concat(n(o.names.map(a)),n(o.skips.map(a).map((function(e){return"-"+e})))).join(",");return o.enable(""),e},o.enable=function(e){var t;o.save(e),o.names=[],o.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){var i=o.instances[t];i.enabled=o.enabled(i.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=o.skips.length;t<r;t++)if(o.skips[t].test(e))return!1;for(t=0,r=o.names.length;t<r;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=r(39),Object.keys(e).forEach((function(t){o[t]=e[t]})),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o}},function(e,t){e.exports.pick=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(t,r){return t[r]=e[r],t}),{})}},function(e,t){e.exports=global},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(21),d=r(13),y=r(7),v=r(49),m=r(50),b=r(11),g=b.randomBytes,_=b.createHash,w=r(2).URL,k=r(4),S=r(22),O=r(25),C=r(0),x=C.BINARY_TYPES,E=C.EMPTY_BUFFER,P=C.GUID,T=C.kStatusCode,j=C.kWebSocket,R=C.NOOP,L=r(53),N=L.addEventListener,B=L.removeEventListener,D=r(26),F=D.format,A=D.parse,I=r(5).toBuffer,U=["CONNECTING","OPEN","CLOSING","CLOSED"],q=[8,13],M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,r,n,i=u(f);function f(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=i.call(this)).readyState=f.CONNECTING,n.protocol="",n._binaryType=x[0],n._closeFrameReceived=!1,n._closeFrameSent=!1,n._closeMessage="",n._closeTimer=null,n._closeCode=1006,n._extensions={},n._receiver=null,n._sender=null,n._socket=null,null!==e?(n._bufferedAmount=0,n._isServer=!1,n._redirects=0,Array.isArray(t)?t=t.join(", "):"object"===s(t)&&null!==t&&(r=t,t=void 0),W(l(n),e,t,r)):n._isServer=!0,n}return t=f,(r=[{key:"setSocket",value:function(e,t,r){var n=new S(this._binaryType,this._extensions,this._isServer,r);this._sender=new O(e,this._extensions),this._receiver=n,this._socket=e,n[j]=this,e[j]=this,n.on("conclude",$),n.on("drain",J),n.on("error",X),n.on("message",K),n.on("ping",Z),n.on("pong",Q),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",ee),e.on("data",te),e.on("end",re),e.on("error",ne),this.readyState=f.OPEN,this.emit("open")}},{key:"emitClose",value:function(){if(!this._socket)return this.readyState=f.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[k.extensionName]&&this._extensions[k.extensionName].cleanup(),this._receiver.removeAllListeners(),this.readyState=f.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}},{key:"close",value:function(e,t){var r=this;if(this.readyState!==f.CLOSED){if(this.readyState===f.CONNECTING)return z(this,this._req,"WebSocket was closed before the connection was established");this.readyState!==f.CLOSING?(this.readyState=f.CLOSING,this._sender.close(e,t,!this._isServer,(function(e){e||(r._closeFrameSent=!0,r._closeFrameReceived&&r._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}},{key:"ping",value:function(e,t,r){if(this.readyState===f.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===f.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||E,t,r)):V(this,e,r)}},{key:"pong",value:function(e,t,r){if(this.readyState===f.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===f.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||E,t,r)):V(this,e,r)}},{key:"send",value:function(e,t,r){if(this.readyState===f.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState===f.OPEN){var n=o({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[k.extensionName]||(n.compress=!1),this._sender.send(e||E,n,r)}else V(this,e,r)}},{key:"terminate",value:function(){if(this.readyState!==f.CLOSED){if(this.readyState===f.CONNECTING)return z(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this.readyState=f.CLOSING,this._socket.destroy())}}},{key:"CONNECTING",get:function(){return f.CONNECTING}},{key:"CLOSING",get:function(){return f.CLOSING}},{key:"CLOSED",get:function(){return f.CLOSED}},{key:"OPEN",get:function(){return f.OPEN}},{key:"binaryType",get:function(){return this._binaryType},set:function(e){x.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}},{key:"bufferedAmount",get:function(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:this._bufferedAmount}},{key:"extensions",get:function(){return Object.keys(this._extensions).join()}}])&&a(t.prototype,r),n&&a(t,n),f}(h);function W(e,t,r,n){var s,a=o(o({protocolVersion:q[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},n),{},{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0});if(!q.includes(a.protocolVersion))throw new RangeError("Unsupported protocol version: ".concat(a.protocolVersion," ")+"(supported versions: ".concat(q.join(", "),")"));t instanceof w?(s=t,e.url=t.href):(s=new w(t),e.url=t);var c="ws+unix:"===s.protocol;if(!(s.host||c&&s.pathname))throw new Error("Invalid URL: ".concat(e.url));var u,f="wss:"===s.protocol||"https:"===s.protocol,l=f?443:80,p=g(16).toString("base64"),h=f?d.get:y.get;if(a.createConnection=f?G:H,a.defaultPort=a.defaultPort||l,a.port=s.port||l,a.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,a.headers=o({"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":p,Connection:"Upgrade",Upgrade:"websocket"},a.headers),a.path=s.pathname+s.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(u=new k(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=F(i({},k.extensionName,u.offer()))),r&&(a.headers["Sec-WebSocket-Protocol"]=r),a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),(s.username||s.password)&&(a.auth="".concat(s.username,":").concat(s.password)),c){var v=a.path.split(":");a.socketPath=v[0],a.path=v[1]}var m=e._req=h(a);a.timeout&&m.on("timeout",(function(){z(e,m,"Opening handshake has timed out")})),m.on("error",(function(t){e._req.aborted||(m=e._req=null,e.readyState=M.CLOSING,e.emit("error",t),e.emitClose())})),m.on("response",(function(o){var i=o.headers.location,s=o.statusCode;if(i&&a.followRedirects&&s>=300&&s<400){if(++e._redirects>a.maxRedirects)return void z(e,m,"Maximum redirects exceeded");m.abort();var c=new w(i,t);W(e,c,r,n)}else e.emit("unexpected-response",m,o)||z(e,m,"Unexpected server response: ".concat(o.statusCode))})),m.on("upgrade",(function(t,n,o){if(e.emit("upgrade",t),e.readyState===M.CONNECTING){m=e._req=null;var i=_("sha1").update(p+P).digest("base64");if(t.headers["sec-websocket-accept"]===i){var s,c=t.headers["sec-websocket-protocol"],f=(r||"").split(/, */);if(!r&&c?s="Server sent a subprotocol but none was requested":r&&!c?s="Server sent no subprotocol":c&&!f.includes(c)&&(s="Server sent an invalid subprotocol"),s)z(e,n,s);else{if(c&&(e.protocol=c),u)try{var l=A(t.headers["sec-websocket-extensions"]);l[k.extensionName]&&(u.accept(l[k.extensionName]),e._extensions[k.extensionName]=u)}catch(t){return void z(e,n,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(n,o,a.maxPayload)}}else z(e,n,"Invalid Sec-WebSocket-Accept header")}}))}function H(e){return e.path=e.socketPath,v.connect(e)}function G(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),m.connect(e)}function z(e,t,r){e.readyState=M.CLOSING;var n=new Error(r);Error.captureStackTrace(n,z),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function V(e,t,r){if(t){var n=I(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}r&&r(new Error("WebSocket is not open: readyState ".concat(e.readyState," ")+"(".concat(U[e.readyState],")")))}function $(e,t){var r=this[j];r._socket.removeListener("data",te),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function J(){this[j]._socket.resume()}function X(e){var t=this[j];t._socket.removeListener("data",te),t.readyState=M.CLOSING,t._closeCode=e[T],t.emit("error",e),t._socket.destroy()}function Y(){this[j].emitClose()}function K(e){this[j].emit("message",e)}function Z(e){var t=this[j];t.pong(e,!t._isServer,R),t.emit("ping",e)}function Q(e){this[j].emit("pong",e)}function ee(){var e=this[j];this.removeListener("close",ee),this.removeListener("end",re),e.readyState=M.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",te),this[j]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",Y),e._receiver.on("finish",Y))}function te(e){this[j]._receiver.write(e)||this.pause()}function re(){var e=this[j];e.readyState=M.CLOSING,e._receiver.end(),this.end()}function ne(){var e=this[j];this.removeListener("error",ne),this.on("error",R),e&&(e.readyState=M.CLOSING,this.destroy())}U.forEach((function(e,t){M[e]=t})),["open","error","close","message"].forEach((function(e){Object.defineProperty(M.prototype,"on".concat(e),{get:function(){for(var t=this.listeners(e),r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set:function(t){for(var r=this.listeners(e),n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})})),M.prototype.addEventListener=N,M.prototype.removeEventListener=B,e.exports=M},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(23).Writable,f=r(4),l=r(0),p=l.BINARY_TYPES,h=l.EMPTY_BUFFER,d=l.kStatusCode,y=l.kWebSocket,v=r(5),m=v.concat,b=v.toArrayBuffer,g=v.unmask,_=r(24),w=_.isValidStatusCode,k=_.isValidUTF8,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e,t,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=a.call(this))._binaryType=e||p[0],o[y]=void 0,o._extensions=t||{},o._isServer=!!r,o._maxPayload=0|n,o._bufferedBytes=0,o._buffers=[],o._compressed=!1,o._payloadLength=0,o._mask=void 0,o._fragmented=0,o._masked=!1,o._fin=!1,o._opcode=0,o._totalPayloadLength=0,o._messageLength=0,o._fragments=[],o._state=0,o._loop=!1,o}return t=c,(r=[{key:"_write",value:function(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}},{key:"consume",value:function(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){var t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}var r=Buffer.allocUnsafe(e);do{var n=this._buffers[0],o=r.length-e;e>=n.length?r.set(this._buffers.shift(),o):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),o),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return r}},{key:"startLoop",value:function(e){var t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}},{key:"getInfo",value:function(){if(this._bufferedBytes<2)this._loop=!1;else{var e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,O(RangeError,"RSV2 and RSV3 must be clear",!0,1002);var t=64==(64&e[0]);if(t&&!this._extensions[f.extensionName])return this._loop=!1,O(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,O(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,O(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,O(RangeError,"invalid opcode ".concat(this._opcode),!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,O(RangeError,"invalid opcode ".concat(this._opcode),!0,1002);if(!this._fin)return this._loop=!1,O(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,O(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,O(RangeError,"invalid payload length ".concat(this._payloadLength),!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,O(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,O(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}}},{key:"getPayloadLength16",value:function(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}},{key:"getPayloadLength64",value:function(){if(!(this._bufferedBytes<8)){var e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,O(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}this._loop=!1}},{key:"haveLength",value:function(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,O(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}},{key:"getMask",value:function(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}},{key:"getData",value:function(e){var t=h;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&g(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}},{key:"decompress",value:function(e,t){var r=this;this._extensions[f.extensionName].decompress(e,this._fin,(function(e,n){if(e)return t(e);if(n.length){if(r._messageLength+=n.length,r._messageLength>r._maxPayload&&r._maxPayload>0)return t(O(RangeError,"Max payload size exceeded",!1,1009));r._fragments.push(n)}var o=r.dataMessage();if(o)return t(o);r.startLoop(t)}))}},{key:"dataMessage",value:function(){if(this._fin){var e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var r;r="nodebuffer"===this._binaryType?m(t,e):"arraybuffer"===this._binaryType?b(m(t,e)):t,this.emit("message",r)}else{var n=m(t,e);if(!k(n))return this._loop=!1,O(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=0}},{key:"controlMessage",value:function(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return O(RangeError,"invalid payload length 1",!0,1002);var t=e.readUInt16BE(0);if(!w(t))return O(RangeError,"invalid status code ".concat(t),!0,1002);var r=e.slice(2);if(!k(r))return O(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}])&&o(t.prototype,r),n&&o(t,n),c}(u);function O(e,t,r,n){var o=new e(r?"Invalid WebSocket frame: ".concat(t):t);return Error.captureStackTrace(o,O),o[d]=n,o}e.exports=S},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{var o=r(!function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}());t.isValidUTF8="object"===n(o)?o.Validation.isValidUTF8:o}catch(e){t.isValidUTF8=function(){return!0}}t.isValidStatusCode=function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(11).randomFillSync,i=r(4),s=r(0).EMPTY_BUFFER,a=r(24).isValidStatusCode,c=r(5),u=c.mask,f=c.toBuffer,l=Buffer.alloc(4),p=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extensions=r||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}var t,r,c;return t=e,c=[{key:"frame",value:function(e,t){var r=t.mask&&t.readOnly,n=t.mask?6:2,i=e.length;e.length>=65536?(n+=8,i=127):e.length>125&&(n+=2,i=126);var s=Buffer.allocUnsafe(r?e.length+n:n);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=i,126===i?s.writeUInt16BE(e.length,2):127===i&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(o(l,0,4),s[1]|=128,s[n-4]=l[0],s[n-3]=l[1],s[n-2]=l[2],s[n-1]=l[3],r?(u(e,l,s,n,e.length),[s]):(u(e,l,e,0,e.length),[s,e])):[s,e]}}],(r=[{key:"close",value:function(e,t,r,n){var o;if(void 0===e)o=s;else{if("number"!=typeof e||!a(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)(o=Buffer.allocUnsafe(2)).writeUInt16BE(e,0);else{var i=Buffer.byteLength(t);if(i>123)throw new RangeError("The message must not be greater than 123 bytes");(o=Buffer.allocUnsafe(2+i)).writeUInt16BE(e,0),o.write(t,2)}}this._deflating?this.enqueue([this.doClose,o,r,n]):this.doClose(o,r,n)}},{key:"doClose",value:function(t,r,n){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:r,readOnly:!1}),n)}},{key:"ping",value:function(e,t,r){var n=f(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,f.readOnly,r]):this.doPing(n,t,f.readOnly,r)}},{key:"doPing",value:function(t,r,n,o){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:r,readOnly:n}),o)}},{key:"pong",value:function(e,t,r){var n=f(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,f.readOnly,r]):this.doPong(n,t,f.readOnly,r)}},{key:"doPong",value:function(t,r,n,o){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:r,readOnly:n}),o)}},{key:"send",value:function(t,r,n){var o=f(t),s=this._extensions[i.extensionName],a=r.binary?2:1,c=r.compress;if(this._firstFragment?(this._firstFragment=!1,c&&s&&(c=o.length>=s._threshold),this._compress=c):(c=!1,a=0),r.fin&&(this._firstFragment=!0),s){var u={fin:r.fin,rsv1:c,opcode:a,mask:r.mask,readOnly:f.readOnly};this._deflating?this.enqueue([this.dispatch,o,this._compress,u,n]):this.dispatch(o,this._compress,u,n)}else this.sendFrame(e.frame(o,{fin:r.fin,rsv1:!1,opcode:a,mask:r.mask,readOnly:f.readOnly}),n)}},{key:"dispatch",value:function(t,r,n,o){var s=this;if(r){var a=this._extensions[i.extensionName];this._deflating=!0,a.compress(t,n.fin,(function(t,r){if(s._socket.destroyed){var i=new Error("The socket was closed while data was being compressed");"function"==typeof o&&o(i);for(var a=0;a<s._queue.length;a++){var c=s._queue[a][4];"function"==typeof c&&c(i)}}else s._deflating=!1,n.readOnly=!1,s.sendFrame(e.frame(r,n),o),s.dequeue()}))}else this.sendFrame(e.frame(t,n),o)}},{key:"dequeue",value:function(){for(;!this._deflating&&this._queue.length;){var e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}},{key:"enqueue",value:function(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}},{key:"sendFrame",value:function(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}])&&n(t.prototype,r),c&&n(t,c),e}();e.exports=p},function(e,t,r){"use strict";var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function o(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((function(t){var r=e[t];return Array.isArray(r)||(r=[r]),r.map((function(e){return[t].concat(Object.keys(e).map((function(t){var r=e[t];return Array.isArray(r)||(r=[r]),r.map((function(e){return!0===e?t:"".concat(t,"=").concat(e)})).join("; ")}))).join("; ")})).join(", ")})).join(", ")},parse:function(e){var t=Object.create(null);if(void 0===e||""===e)return t;for(var r,i,s=Object.create(null),a=!1,c=!1,u=!1,f=-1,l=-1,p=0;p<e.length;p++){var h=e.charCodeAt(p);if(void 0===r)if(-1===l&&1===n[h])-1===f&&(f=p);else if(32===h||9===h)-1===l&&-1!==f&&(l=p);else{if(59!==h&&44!==h)throw new SyntaxError("Unexpected character at index ".concat(p));if(-1===f)throw new SyntaxError("Unexpected character at index ".concat(p));-1===l&&(l=p);var d=e.slice(f,l);44===h?(o(t,d,s),s=Object.create(null)):r=d,f=l=-1}else if(void 0===i)if(-1===l&&1===n[h])-1===f&&(f=p);else if(32===h||9===h)-1===l&&-1!==f&&(l=p);else if(59===h||44===h){if(-1===f)throw new SyntaxError("Unexpected character at index ".concat(p));-1===l&&(l=p),o(s,e.slice(f,l),!0),44===h&&(o(t,r,s),s=Object.create(null),r=void 0),f=l=-1}else{if(61!==h||-1===f||-1!==l)throw new SyntaxError("Unexpected character at index ".concat(p));i=e.slice(f,p),f=l=-1}else if(c){if(1!==n[h])throw new SyntaxError("Unexpected character at index ".concat(p));-1===f?f=p:a||(a=!0),c=!1}else if(u)if(1===n[h])-1===f&&(f=p);else if(34===h&&-1!==f)u=!1,l=p;else{if(92!==h)throw new SyntaxError("Unexpected character at index ".concat(p));c=!0}else if(34===h&&61===e.charCodeAt(p-1))u=!0;else if(-1===l&&1===n[h])-1===f&&(f=p);else if(-1===f||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError("Unexpected character at index ".concat(p));if(-1===f)throw new SyntaxError("Unexpected character at index ".concat(p));-1===l&&(l=p);var y=e.slice(f,l);a&&(y=y.replace(/\\/g,""),a=!1),o(s,i,y),44===h&&(o(t,r,s),s=Object.create(null),r=void 0),i=void 0,f=l=-1}else-1===l&&(l=p)}if(-1===f||u)throw new SyntaxError("Unexpected end of input");-1===l&&(l=p);var v=e.slice(f,l);return void 0===r?o(t,v,s):(void 0===i?o(s,v,!0):o(s,i,a?v.replace(/\\/g,""):v),o(t,r,s)),t}}},function(e,t,r){var n=r(28);e.exports=function(e,t){return new n(e,t)},e.exports.Socket=n,e.exports.protocol=n.protocol,e.exports.Transport=r(8),e.exports.transports=r(12),e.exports.parser=r(1)},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(12),p=r(9),h=r(3)("engine.io-client:socket"),d=r(1),y=r(56),v=r(10),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,r,u,f=c(p);function p(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,p),t=f.call(this),e&&"object"===o(e)&&(r=e,e=null),e?(e=y(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=y(r.host).host),t.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=t.secure?"443":"80"),t.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),t.port=r.port||("undefined"!=typeof location&&location.port?location.port:t.secure?443:80),t.transports=r.transports||["polling","websocket"],t.readyState="",t.writeBuffer=[],t.prevBufferLen=0,t.opts=n({path:"/engine.io",agent:!1,upgrade:!0,jsonp:!0,timestampParam:"t",policyPort:843,rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},r),t.opts.path=t.opts.path.replace(/\/$/,"")+"/","string"==typeof t.opts.query&&(t.opts.query=v.decode(t.opts.query)),t.opts.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),t.id=null,t.upgrades=null,t.pingInterval=null,t.pingTimeout=null,t.pingTimeoutTimer=null,t.open(),t}return t=p,(r=[{key:"createTransport",value:function(e){h('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.opts.query);t.EIO=d.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=n({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return h("options: %j",r),new l[e](r)}},{key:"open",value:function(){var e;if(this.opts.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return h("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){h("setting transport %s",e.name);var t=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){h('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;r=r||o}r||(h('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!r)if("pong"===o.type&&"probe"===o.data){if(h('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;p.priorWebsocketSuccess="websocket"===t.name,h('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(h("changing transport and sending upgrade packet"),f(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{h('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,n.emit("upgradeError",i)}})))}function i(){r||(r=!0,f(),t.close(),t=null)}function s(r){var o=new Error("probe error: "+r);o.transport=t.name,i(),h('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",o)}function a(){s("transport closed")}function c(){s("socket closed")}function u(e){t&&e.name!==t.name&&(h('"%s" works - aborting "%s"',e.name,t.name),i())}function f(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",a),n.removeListener("close",c),n.removeListener("upgrading",u)}p.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",a),this.once("close",c),this.once("upgrading",u),t.open()}},{key:"onOpen",value:function(){if(h("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){h("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(h('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else h('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}}},{key:"close",value:function(){var e=this;function t(){e.onClose("forced close"),h("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()),this}},{key:"onError",value:function(e){h("socket error %j",e),p.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(h('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}])&&s(t.prototype,r),u&&s(t,u),p}(p);m.priorWebsocketSuccess=!1,m.protocol=d.protocol,e.exports=m},function(e,t,r){
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var n=r(2),o=r(30).spawn,i=r(31);t.XMLHttpRequest=function(){"use strict";var e,t,s=this,a=r(7),c=r(13),u={},f=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p={},h={},d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],y=["TRACE","TRACK","CONNECT"],v=!1,m=!1,b={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;this.open=function(e,t,r,n,o){if(this.abort(),m=!1,!function(e){return e&&-1===y.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");u={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:o||null},g(this.OPENED)},this.setDisableHeaderCheck=function(e){f=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return f||e&&-1===d.indexOf(e.toLowerCase())}(e)){if(v)throw new Error("INVALID_STATE_ERR: send flag is true");e=h[e.toLowerCase()]||e,h[e.toLowerCase()]=e,p[e]=p[e]?p[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!m?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||m)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&h[e.toLowerCase()]?p[h[e.toLowerCase()]]:""},this.send=function(r){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(v)throw new Error("INVALID_STATE_ERR: send has already been called");var f,d=!1,y=!1,b=n.parse(u.url);switch(b.protocol){case"https:":d=!0;case"http:":f=b.hostname;break;case"file:":y=!0;break;case void 0:case null:case"":f="localhost";break;default:throw new Error("Protocol not supported.")}if(y){if("GET"!==u.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(u.async)i.readFile(b.pathname,"utf8",(function(e,t){e?s.handleError(e):(s.status=200,s.responseText=t,g(s.DONE))}));else try{this.responseText=i.readFileSync(b.pathname,"utf8"),this.status=200,g(s.DONE)}catch(e){this.handleError(e)}}else{var _=b.port||(d?443:80),w=b.pathname+(b.search?b.search:"");for(var k in l)h[k.toLowerCase()]||(p[k]=l[k]);if(p.Host=f,d&&443===_||80===_||(p.Host+=":"+b.port),u.user){void 0===u.password&&(u.password="");var S=new Buffer(u.user+":"+u.password);p.Authorization="Basic "+S.toString("base64")}"GET"===u.method||"HEAD"===u.method?r=null:r?(p["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),p["Content-Type"]||(p["Content-Type"]="text/plain;charset=UTF-8")):"POST"===u.method&&(p["Content-Length"]=0);var O={host:f,port:_,path:w,method:u.method,headers:p,agent:!1,withCredentials:s.withCredentials};if(m=!1,u.async){var C=d?c.request:a.request;v=!0,s.dispatchEvent("readystatechange");var x=function(e){s.handleError(e)};e=C(O,(function r(o){if(301!==(t=o).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),g(s.HEADERS_RECEIVED),s.status=t.statusCode,t.on("data",(function(e){e&&(s.responseText+=e),v&&g(s.LOADING)})),t.on("end",(function(){v&&(g(s.DONE),v=!1)})),t.on("error",(function(e){s.handleError(e)}));else{u.url=t.headers.location;var i=n.parse(u.url);f=i.hostname;var a={hostname:i.hostname,port:i.port,path:i.path,method:303===t.statusCode?"GET":u.method,headers:p,withCredentials:s.withCredentials};(e=C(a,r).on("error",x)).end()}})).on("error",x),r&&e.write(r),e.end(),s.dispatchEvent("loadstart")}else{var E=".node-xmlhttprequest-content-"+process.pid,P=".node-xmlhttprequest-sync-"+process.pid;i.writeFileSync(P,"","utf8");for(var T="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(d?"s":"")+".request;var options = "+JSON.stringify(O)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+E+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+P+"');});response.on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+P+"');});}).on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+P+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",j=o(process.argv[0],["-e",T]);i.existsSync(P););var R=JSON.parse(i.readFileSync(E,"utf8"));j.stdin.end(),i.unlinkSync(E),R.err?s.handleError(R.err):(t=R.data,s.status=R.data.statusCode,s.responseText=R.data.text,g(s.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,m=!0,g(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),p=l,this.status=0,this.responseText="",this.responseXML="",m=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!v||this.readyState===this.DONE||(v=!1,g(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in b||(b[e]=[]),b[e].push(t)},this.removeEventListener=function(e,t){e in b&&(b[e]=b[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof s["on"+e]&&s["on"+e](),e in b)for(var t=0,r=b[e].length;t<r;t++)b[e][t].call(s)};var g=function(e){e!=s.LOADING&&s.readyState===e||(s.readyState=e,(u.async||s.readyState<s.OPENED||s.readyState===s.DONE)&&s.dispatchEvent("readystatechange"),s.readyState!==s.DONE||m||(s.dispatchEvent("load"),s.dispatchEvent("loadend")))}}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("fs")},function(e,t,r){var n=r(14),o=function(){this.cookieList=[],this.cookieMap={}};o.prototype={clear:function(){this.cookieList=[],this.cookieMap={}},save:function(){for(var e="",t=0;t<this.cookieList.length;t++)e+=this.cookieList[t].toString()+"\r\n";return e},load:function(e){this.clear();for(var t=e.split(/\r?\n/),r=0;r<t.length;r++)if(""!==t[r]){var o=n.build(t[r]);this.insert(o)}},insert:function(e){if(!e.expired()){var t=e.toKey(),r=this.cookieMap[t];void 0!==r?this.cookieList[r]=e:(r=this.cookieList.length,this.cookieMap[t]=r,this.cookieList.push(e))}},remove:function(e){var t=e.toKey(),r=this.cookieMap[t];if(void 0===r)throw new Error("remove: cookie not in cookie jar");delete this.cookieMap[t],this.cookieList.splice(r,1)},find:function(e,t){void 0===e&&(e=""),void 0===t&&(t="/");for(var r=[],n=0;n<this.cookieList.length;n++){var o=this.cookieList[n];o.domain!==e||o.path!==t||o.expired()||r.push(o)}return r},findFuzzy:function(e,t){for(var r=[],n={};""!==e;){for(var o=t;""!==o;){for(var i=this.find(e,o),s=0;s<i.length;s++)n[i[s].name]||(r.push(i[s]),n[i[s].name]=!0);o=o.replace(/(?:[^\/]+|\/)$/,"")}e=e.replace(/^(?:[^.]+|\.)/,"")}return r}},e.exports=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(6),d=r(15),y=r(9),v=r(18).pick,m=r(19),b=r(3)("engine.io-client:polling-xhr");function g(){}var _=null!=new(r(6))({xdomain:!1}).responseType,w=function(e){c(r,e);var t=f(r);function r(e){var n;if(i(this,r),n=t.call(this,e),"undefined"!=typeof location){var o="https:"===location.protocol,s=location.port;s||(s=o?443:80),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port,n.xs=e.secure!==o}var a=e&&e.forceBase64;return n.supportsBinary=_&&!a,n}return a(r,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(e,{supportsBinary:this.supportsBinary,xd:this.xd,xs:this.xs},this.opts),new k(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",(function(e){o.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){b("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),r}(d),k=function(e){c(r,e);var t=f(r);function r(e,n){var o;return i(this,r),(o=t.call(this)).opts=n,o.method=n.method||"GET",o.uri=e,o.async=!1!==n.async,o.data=void 0!==n.data?n.data:null,o.isBinary=n.isBinary,o.supportsBinary=n.supportsBinary,o.create(),o}return a(r,[{key:"create",value:function(){var e=v(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var t=this.xhr=new h(e),n=this;try{b("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.opts.extraHeaders[o])}catch(e){console.log(e)}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},b("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=g:this.xhr.onreadystatechange=g,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),r}(y);if(k.requestsCount=0,k.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",S);else if("function"==typeof addEventListener){addEventListener("onpagehide"in m?"pagehide":"unload",S,!1)}function S(){for(var e in k.requests)k.requests.hasOwnProperty(e)&&k.requests[e].abort()}e.exports=w,e.exports.Request=k},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var r,n,o,i=String.fromCharCode;function s(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return i(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return i(e);var r="";return 0==(4294965248&e)?r=i(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),r=i(e>>12&15|224),r+=c(e,6)):0==(4292870144&e)&&(r=i(e>>18&7|240),r+=c(e,12),r+=c(e,6)),r+=i(63&e|128)}function f(){if(o>=n)throw Error("Invalid byte index");var e=255&r[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function l(e){var t,i;if(o>n)throw Error("Invalid byte index");if(o==n)return!1;if(t=255&r[o],o++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|f())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|f()<<6|f())>=2048)return a(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|f()<<12|f()<<6|f())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=s(e),o=n.length,i=-1,a="";++i<o;)a+=u(n[i],r);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;r=s(e),n=r.length,o=0;for(var c,u=[];!1!==(c=l(a));)u.push(c);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)(t=e[n])>65535&&(o+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=i(t);return o}(u)}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(36),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(t){if(!t||"object"!==n(t))return!1;if(o(t)){for(var r=0,i=t.length;r<i;r++)if(e(t[r]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){function r(){}e.exports=function(e,t,n){var o=!1;return n=n||r,i.count=e,0===e?t():i;function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(17)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=1e3,o=6e4,i=60*o,s=24*i;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var c=r(e);if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*i;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===c&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return a(e,t,s,"day");if(t>=i)return a(e,t,i,"hour");if(t>=o)return a(e,t,o,"minute");if(t>=n)return a(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=o)return Math.round(e/o)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n=r(41),o=r(42);t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var o=this.color,i="[3"+(o<8?o:"8;5;"+o),s="  ".concat(i,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var i=r(43);i&&(i.stderr||i).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(17)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";var n,o=r(44),i=o("no-color")||o("no-colors")||o("color=false")?0:o("color=16m")||o("color=full")||o("color=truecolor")?3:o("color=256")?2:o("color")||o("colors")||o("color=true")||o("color=always")?1:process.stdout&&!process.stdout.isTTY?0:"win32"===process.platform||"COLORTERM"in process.env?1:"dumb"===process.env.TERM?0:/^xterm-256(?:color)?/.test(process.env.TERM)?2:/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)?1:0;0===i&&"FORCE_COLOR"in process.env&&(i=1),e.exports=process&&(0!==(n=i)&&{level:n,hasBasic:!0,has256:n>=2,has16m:n>=3})},function(e,t,r){"use strict";e.exports=function(e,t){var r=(t=t||process.argv).indexOf("--"),n=/^--/.test(e)?"":"--",o=t.indexOf(n+e);return-1!==o&&(-1===r||o<r)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p=r(15),h=r(19),d=/\n/g,y=/\\n/g;function v(){}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,n,c=a(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this,e)).query=t.query||{},l||(l=h.___eio=h.___eio||[]),t.index=l.length;var r=u(t);return l.push((function(e){r.onData(e)})),t.query.j=t.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){r.script&&(r.script.onerror=v)}),!1),t}return t=p,(r=[{key:"doClose",value:function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i(f(p.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}},{key:"doWrite",value:function(e,t){var r,n=this;if(!this.form){var o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function a(){c(),t()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),e=e.replace(y,"\\\n"),this.area.value=e.replace(d,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&a()}:this.iframe.onload=a}},{key:"supportsBinary",get:function(){return!1}}])&&o(t.prototype,r),n&&o(t,n),p}(p);e.exports=m},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(8),f=r(1),l=r(10),p=r(16),h=r(18).pick,d=r(47),y=d.WebSocket,v=d.usingBrowserWebSocket,m=r(3)("engine.io-client:websocket"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=a.call(this,e),e&&e.forceBase64&&(t.supportsBinary=!1),t.supportsBinary=!0,t}return t=c,(r=[{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=h(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=v&&!this.opts.isReactNative?t?new y(e,t):new y(e):new y(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=e.length,n=0,o=r;n<o;n++)!function(e){f.encodePacket(e,t.supportsBinary,(function(n){var o={};v||(e.options&&(o.compress=e.options.compress),t.opts.perMessageDeflate&&("string"==typeof n?Buffer.byteLength(n):n.length)<t.opts.perMessageDeflate.threshold&&(o.compress=!1));try{v?t.ws.send(n):t.ws.send(n,o)}catch(e){m("websocket closed before onclose event")}--r||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[n])}},{key:"onClose",value:function(){u.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&this.ws.close()}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",r="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=p()),this.supportsBinary||(e.b64=1),(e=l.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+e}},{key:"check",value:function(){return!(!y||"__initialize"in y&&this.name===c.prototype.name)}},{key:"name",get:function(){return"websocket"}}])&&o(t.prototype,r),n&&o(t,n),c}(u);e.exports=b},function(e,t,r){e.exports={WebSocket:r(48),usingBrowserWebSocket:!1}},function(e,t,r){"use strict";var n=r(20);n.createWebSocketStream=r(54),n.Server=r(55),n.Receiver=r(22),n.Sender=r(25),e.exports=n},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=Symbol("kDone"),i=Symbol("kRun"),s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[o]=function(){r.pending--,r[i]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}var t,r,s;return t=e,(r=[{key:"add",value:function(e){this.jobs.push(e),this[i]()}},{key:i,value:function(){if(this.pending!==this.concurrency&&this.jobs.length){var e=this.jobs.shift();this.pending++,e(this[o])}}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function e(t,r){u(this,e),this.target=r,this.type=t},l=function(e){o(r,e);var t=s(r);function r(e,n){var o;return u(this,r),(o=t.call(this,"message",n)).data=e,o}return r}(f),p=function(e){o(r,e);var t=s(r);function r(e,n,o){var i;return u(this,r),(i=t.call(this,"close",o)).wasClean=o._closeFrameReceived&&o._closeFrameSent,i.reason=n,i.code=e,i}return r}(f),h=function(e){o(r,e);var t=s(r);function r(e){return u(this,r),t.call(this,"open",e)}return r}(f),d=function(e){o(r,e);var t=s(r);function r(e,n){var o;return u(this,r),(o=t.call(this,"error",n)).message=e.message,o.error=e,o}return r}(f),y={addEventListener:function(e,t){function r(e){t.call(this,new l(e,this))}function n(e,r){t.call(this,new p(e,r,this))}function o(e){t.call(this,new d(e,this))}function i(){t.call(this,new h(this))}"function"==typeof t&&("message"===e?(r._listener=t,this.on(e,r)):"close"===e?(n._listener=t,this.on(e,n)):"error"===e?(o._listener=t,this.on(e,o)):"open"===e?(i._listener=t,this.on(e,i)):this.on(e,t))},removeEventListener:function(e,t){for(var r=this.listeners(e),n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=y},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(23).Duplex;function a(e){e.emit("close")}function c(){!this.destroyed&&this._writableState.finished&&this.destroy()}function u(e){this.removeListener("error",u),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){var r=!0;function n(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",n)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",n));var i=new s(o(o({},t),{},{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return e.on("message",(function(t){i.push(t)||(r=!1,e._socket.pause())})),e.once("error",(function(e){i.destroyed||i.destroy(e)})),e.once("close",(function(){i.destroyed||i.push(null)})),i._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(a,i);var n=!1;e.once("error",(function(e){n=!0,r(e)})),e.once("close",(function(){n||r(t),process.nextTick(a,i)})),e.terminate()},i._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),i._readableState.endEmitted&&i.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){i._final(t)}))},i._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},i._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){i._write(t,r,n)}))},i.on("end",c),i.on("error",u),i}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=r(21),v=r(11).createHash,m=r(7),b=m.createServer,g=m.STATUS_CODES,_=r(4),w=r(20),k=r(26),S=k.format,O=k.parse,C=r(0),x=C.GUID,E=C.kWebSocket,P=/^[+/0-9A-Za-z]{22}==$/,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,i=l(s);function s(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=i.call(this),null==(e=a({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');return null!=e.port?(r._server=b((function(e,t){var r=g[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),r._server.listen(e.port,e.host,e.backlog,t)):e.server&&(r._server=e.server),r._server&&(r._removeListeners=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e.on(o,t[o])}return function(){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e.removeListener(o,t[o])}}}(r._server,{listening:r.emit.bind(h(r),"listening"),error:r.emit.bind(h(r),"error"),upgrade:function(e,t,n){r.handleUpgrade(e,t,n,(function(t){r.emit("connection",t,e)}))}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(r.clients=new Set),r.options=e,r}return t=s,(r=[{key:"address",value:function(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}},{key:"close",value:function(e){var t=this;if(e&&this.once("close",e),this.clients){var r,n=o(this.clients);try{for(n.s();!(r=n.n()).done;)r.value.terminate()}catch(e){n.e(e)}finally{n.f()}}var i=this._server;i&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?i.close((function(){return t.emit("close")})):process.nextTick(j,this)}},{key:"shouldHandle",value:function(e){if(this.options.path){var t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}},{key:"handleUpgrade",value:function(e,t,r,n){var o=this;t.on("error",R);var i=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),s=+e.headers["sec-websocket-version"],a={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!i||!P.test(i)||8!==s&&13!==s||!this.shouldHandle(e))return L(t,400);if(this.options.perMessageDeflate){var c=new _(this.options.perMessageDeflate,!0,this.options.maxPayload);try{var u=O(e.headers["sec-websocket-extensions"]);u[_.extensionName]&&(c.accept(u[_.extensionName]),a[_.extensionName]=c)}catch(e){return L(t,400)}}if(this.options.verifyClient){var f={origin:e.headers["".concat(8===s?"sec-websocket-origin":"origin")],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(function(s,c,u,f){if(!s)return L(t,c||401,u,f);o.completeUpgrade(i,a,e,t,r,n)}));if(!this.options.verifyClient(f))return L(t,401)}this.completeUpgrade(i,a,e,t,r,n)}},{key:"completeUpgrade",value:function(e,t,r,n,o,i){var s=this;if(!n.readable||!n.writable)return n.destroy();if(n[E])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");var a=v("sha1").update(e+x).digest("base64"),u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: ".concat(a)],f=new w(null),l=r.headers["sec-websocket-protocol"];if(l&&(l=l.trim().split(/ *, */),(l=this.options.handleProtocols?this.options.handleProtocols(l,r):l[0])&&(u.push("Sec-WebSocket-Protocol: ".concat(l)),f.protocol=l)),t[_.extensionName]){var p=t[_.extensionName].params,h=S(c({},_.extensionName,[p]));u.push("Sec-WebSocket-Extensions: ".concat(h)),f._extensions=t}this.emit("headers",u,r),n.write(u.concat("\r\n").join("\r\n")),n.removeListener("error",R),f.setSocket(n,o,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",(function(){return s.clients.delete(f)}))),i(f)}}])&&u(t.prototype,r),n&&u(t,n),s}(y);function j(e){e.emit("close")}function R(){this.destroy()}function L(e,t,r,n){e.writable&&(r=r||g[t],n=a({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r)},n),e.write("HTTP/1.1 ".concat(t," ").concat(g[t],"\r\n")+Object.keys(n).map((function(e){return"".concat(e,": ").concat(n[e])})).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",R),e.destroy()}e.exports=T},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=r.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}}])}));